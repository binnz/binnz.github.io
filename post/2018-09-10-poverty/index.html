<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Practice in R: Insights on Poverty - California Dreaming</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
  
  <meta name="description" content="This practice is based on Hans Rosling talks New Insights on Poverty and The Best Stats You&rsquo;ve Ever Seen.
The assignment uses data to answer specific question about global health and economics. The data contradicts commonly held preconceived notions. For example, Hans Rosling starts his talk by asking: &ldquo;for each of the six pairs of countries below, which country do you think had the highest child mortality in 2015?&rdquo;

Sri Lanka or Turkey
Poland or South Korea
Malaysia or Russia
Pakistan or Vietnam
Thailand or South Africa

Most people get them wrong. Why is this? In part it is due to our preconceived notion that the world is divided into two groups: the
Western world versus the third world, characterized by &ldquo;long life,small family&rdquo; and &ldquo;short life, large family&rdquo; respectively. In this homework we will use data visualization to gain insights on this topic.">
  
  <meta itemprop="name" content="Practice in R: Insights on Poverty - California Dreaming">
  <meta itemprop="description" content="This practice is based on Hans Rosling talks New Insights on Poverty and The Best Stats You&rsquo;ve Ever Seen.
The assignment uses data to answer specific question about global health and economics. The data contradicts commonly held preconceived notions. For example, Hans Rosling starts his talk by asking: &ldquo;for each of the six pairs of countries below, which country do you think had the highest child mortality in 2015?&rdquo;

Sri Lanka or Turkey
Poland or South Korea
Malaysia or Russia
Pakistan or Vietnam
Thailand or South Africa

Most people get them wrong. Why is this? In part it is due to our preconceived notion that the world is divided into two groups: the
Western world versus the third world, characterized by &ldquo;long life,small family&rdquo; and &ldquo;short life, large family&rdquo; respectively. In this homework we will use data visualization to gain insights on this topic.">
  <meta itemprop="image" content="https://binnz.github.io/img/author.jpg">
  
  
  <meta name="twitter:description" content="">
  
  <link rel="shortcut icon" href="https://binnz.github.io/img/favicon.ico"/>
  <link rel="apple-touch-icon" href="https://binnz.github.io/apple-touch-icon.png" />
  <link rel="apple-touch-icon-precomposed" href="https://binnz.github.io/apple-touch-icon.png" />
  <link rel="stylesheet" href="https://binnz.github.io/highlight/styles/github.css">
  <script src="https://binnz.github.io/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  <link rel="stylesheet" href="https://binnz.github.io/font/hack/css/hack.min.css">
  <link rel="stylesheet" href="https://binnz.github.io/css/style.css">
</head>

<body>
  <header>
    <div>
  <div style="height:150px; width:100%; clear:both;"></div>
  <div id="textlogo">
    <h1 class="site-name"><a href="https://binnz.github.io/" title="California Dreaming">California Dreaming</a></h1>
    <h2 class="blog-motto"></h2>
  </div>
  <div class="navbar"><a class="navbutton navmobile" href="#" title="menu"></a></div>
			<div style="height:50px; width:100%; clear:both;"></div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="menu">
			</a><div style="height:50px; width:100%; clear:both;"></div></div>
  <nav class="animated">
    <ul>
      
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/post/">Archives</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      
      <li>
        <form class="search" method="get" action="https://www.google.com/search">
          <div>
            <input type="text" id="search" name="q" placeholder='Search'>
          </div>
        </form>
      </li>
    </ul>
  </nav>
</div>

  </header>
  <div id="container">
    <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody">
    <header class="article-info clearfix">
  <h1 itemprop="name">
      <a href="https://binnz.github.io/post/2018-09-10-poverty/" title="Practice in R: Insights on Poverty" itemprop="url">Practice in R: Insights on Poverty</a>
  </h1>
  <p class="article-author">By
    
      <a href="" title="">you</a>
    
  </p>
  <p class="article-time">
    <time datetime="2018-09-10 00:00:00 &#43;0000 UTC" itemprop="datePublished">2018-09-10</time>
  </p>
</header>

	<div class="article-content">
    
    <p>This practice is based on Hans Rosling talks <a href="https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en">New Insights on Poverty</a> and <a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen">The Best Stats You&rsquo;ve Ever Seen</a>.</p>
<p>The assignment uses data to answer specific question about global health and economics. The data contradicts commonly held preconceived notions. For example, Hans Rosling starts his talk by asking: &ldquo;for each of the six pairs of countries below, which country do you think had the highest child mortality in 2015?&rdquo;</p>
<ol>
<li>Sri Lanka or Turkey</li>
<li>Poland or South Korea</li>
<li>Malaysia or Russia</li>
<li>Pakistan or Vietnam</li>
<li>Thailand or South Africa</li>
</ol>
<p>Most people get them wrong. Why is this? In part it is due to our preconceived notion that the world is divided into two groups: the
<em>Western world</em> versus the <em>third world</em>, characterized by &ldquo;long life,small family&rdquo; and &ldquo;short life, large family&rdquo; respectively. In this homework we will use data visualization to gain insights on this topic.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">gridExtra</span><span class="p">)</span>
<span class="nf">theme_set</span><span class="p">(</span><span class="nf">theme_bw</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="download-and-organize-the-data">Download and organize the data</h2>
<p>The first step in our analysis is to download and organize the data. The necessary data to answer these question is available on the <a href="http://www.gapminder.org/data/">gapminder</a> website.</p>
<h3 id="1-create-five-tibble-table-objects-one-for-each-of-the-tables">1. Create five <code>tibble</code> table objects, one for each of the tables</h3>
<p>We will use the following datasets:</p>
<ol>
<li><a href="http://docs.google.com/spreadsheet/pub?key=0ArfEDsV3bBwCcGhBd2NOQVZ1eWowNVpSNjl1c3lRSWc&amp;output=csv">Childhood mortality</a></li>
<li><a href="http://docs.google.com/spreadsheet/pub?key=phAwcNAVuyj2tPLxKvvnNPA&amp;output=csv">Life expectancy</a></li>
<li><a href="http://docs.google.com/spreadsheet/pub?key=phAwcNAVuyj0TAlJeCEzcGQ&amp;output=csv">Fertility</a></li>
<li><a href="http://docs.google.com/spreadsheet/pub?key=phAwcNAVuyj0XOoBL_n5tAQ&amp;output=csv">Population</a></li>
<li><a href="http://docs.google.com/spreadsheet/pub?key=pyj6tScZqmEfI4sLVvEQtHw&amp;output=csv">Total GDP</a></li>
</ol>
<p>Create five <code>tibble</code> table objects, one for each of the tables provided in the above files. Hints: Use the <code>read_csv</code> function. Because these are only temporary files, give them short names.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="n">childhood</span> <span class="o">&lt;-</span> <span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;http://docs.google.com/spreadsheet/pub?key=0ArfEDsV3bBwCcGhBd2NOQVZ1eWowNVpSNjl1c3lRSWc&amp;output=csv&#34;</span><span class="p">)</span>
<span class="n">life</span> <span class="o">&lt;-</span> <span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;http://docs.google.com/spreadsheet/pub?key=phAwcNAVuyj2tPLxKvvnNPA&amp;output=csv&#34;</span><span class="p">)</span>
<span class="n">fert</span> <span class="o">&lt;-</span> <span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;http://docs.google.com/spreadsheet/pub?key=phAwcNAVuyj0TAlJeCEzcGQ&amp;output=csv&#34;</span><span class="p">)</span>
<span class="n">pop</span> <span class="o">&lt;-</span> <span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;http://docs.google.com/spreadsheet/pub?key=phAwcNAVuyj0XOoBL_n5tAQ&amp;output=csv&#34;</span><span class="p">)</span>
<span class="n">gdp</span> <span class="o">&lt;-</span> <span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;http://docs.google.com/spreadsheet/pub?key=pyj6tScZqmEfI4sLVvEQtHw&amp;output=csv&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2-write-a-function-that-takes-a-table-as-an-argument-and-returns-the-column-name">2. Write a function that takes a table as an argument and returns the column name</h3>
<p>Write a function called <code>my_func</code> that takes a table as an argument and returns the column name. For each of the five tables, what is the name of the column containing the country names? Print out the tables or look at them with <code>View</code> to determine the column.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="n">my_func</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">tab</span><span class="p">){</span>
  <span class="nf">return</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">tab</span><span class="p">))</span>
<span class="p">}</span>

<span class="nf">c</span><span class="p">(</span><span class="nf">my_func</span><span class="p">(</span><span class="n">childhood</span><span class="p">)</span><span class="n">[1]</span><span class="p">,</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">life</span><span class="p">)</span><span class="n">[1]</span><span class="p">,</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">fert</span><span class="p">)</span><span class="n">[1]</span><span class="p">,</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="n">[1]</span><span class="p">,</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">gdp</span><span class="p">)</span><span class="n">[1]</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">## [1] &#34;Under five mortality&#34;    &#34;Life expectancy&#34;        </span>
<span class="c1">## [3] &#34;Total fertility rate&#34;    &#34;Total population&#34;       </span>
<span class="c1">## [5] &#34;GDP (constant 2000 US$)&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-fix-inconsistency-in-naming-their-country-column">3. Fix inconsistency in naming their country column</h3>
<p>In the previous problem we noted that gapminder is inconsistent in naming their country column. Fix this by assigning a common name to this column in the various tables.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="nf">names</span><span class="p">(</span><span class="n">childhood</span><span class="p">)</span><span class="n">[1]</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">life</span><span class="p">)</span><span class="n">[1]</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">fert</span><span class="p">)</span><span class="n">[1]</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="n">[1]</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">gdp</span><span class="p">)</span><span class="n">[1]</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="4-create-tidy-data-sets">4. Create tidy data sets</h3>
<p>Notice that in these tables, years are represented by columns. We want to create a tidy dataset in which each row is a unit or observation and our 5 values of interest, including the year for that unit, are in the columns. The unit here is a country/year pair.</p>
<p>We call this the <em>long</em> format. Use the <code>gather</code> function from the <code>tidyr</code> package to create a new table for childhood mortality using the long format. Call the new columns <code>year</code> and <code>child_mortality</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="n">childhood_long</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">childhood</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">child_mortality</span><span class="p">,</span> <span class="o">-</span><span class="n">country</span><span class="p">,</span> <span class="n">factor_key</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Now redefine the remaining tables in this way.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="n">life_long</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">life</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">life_expectancy</span><span class="p">,</span> <span class="o">-</span><span class="n">country</span><span class="p">,</span> <span class="n">factor_key</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="n">fert_long</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">fert</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">fertility</span><span class="p">,</span> <span class="o">-</span><span class="n">country</span><span class="p">,</span> <span class="n">factor_key</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="n">pop_long</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">population</span><span class="p">,</span> <span class="o">-</span><span class="n">country</span><span class="p">,</span> <span class="n">factor_key</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="n">gdp_long</span> <span class="o">&lt;-</span> <span class="nf">gather</span><span class="p">(</span><span class="n">gdp</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">total_gdp</span><span class="p">,</span> <span class="o">-</span><span class="n">country</span><span class="p">,</span> <span class="n">factor_key</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="5-join-all-tables-together">5. Join all tables together</h3>
<p>Now we want to join all these files together. Make one consolidated table containing all the columns</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Match all files by country and year</span>
<span class="n">mergeAll</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">){</span>
  <span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">merge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">,</span> <span class="s">&#34;year&#34;</span><span class="p">),</span> <span class="n">all</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
  <span class="nf">return</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Outer join </span>
<span class="n">dat</span> <span class="o">&lt;-</span> <span class="nf">Reduce</span><span class="p">(</span><span class="n">mergeAll</span><span class="p">,</span> <span class="nf">list</span><span class="p">(</span><span class="n">childhood_long</span><span class="p">,</span> <span class="n">life_long</span><span class="p">,</span> <span class="n">fert_long</span><span class="p">,</span> <span class="n">pop_long</span><span class="p">,</span> <span class="n">gdp_long</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="6-add-column-continent-for-each-country">6. Add column: continent for each country</h3>
<p>Add a column to the consolidated table containing the continent for each country. Hint: We have created a file that maps countries to continents (<a href="http://ghuang.stat.nctu.edu.tw/course/datasci17/files/hwks/continent-info.csv)">http://ghuang.stat.nctu.edu.tw/course/datasci17/files/hwks/continent-info.csv)</a>. Hint: Learn to use the <code>left_join</code> function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Load continent map</span>
<span class="n">conti_map</span> <span class="o">&lt;-</span> <span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;http://ghuang.stat.nctu.edu.tw/course/datasci17/files/hwks/continent-info.csv&#34;</span><span class="p">,</span>  <span class="n">col_names</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">,</span> <span class="s">&#34;continent&#34;</span><span class="p">))</span>

<span class="c1"># Left Join</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">merge</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">conti_map</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;country&#34;</span><span class="p">),</span> <span class="n">all.x</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="report-the-child-mortalilty-rate-in-2015">Report the child mortalilty rate in 2015</h2>
<p>Report the child mortalilty rate in 2015 for these 5 pairs:</p>
<ol>
<li>Sri Lanka or Turkey</li>
<li>Poland or South Korea</li>
<li>Malaysia or Russia</li>
<li>Pakistan or Vietnam</li>
<li>Thailand or South Africa</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="n">reportChildMortality</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">){</span>
  <span class="n">v1</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">year</span><span class="o">==</span><span class="n">y</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">country</span><span class="o">==</span><span class="n">c1</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="n">child_mortality</span><span class="p">)</span>
  <span class="n">v1</span> <span class="o">&lt;-</span> <span class="n">v1[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span><span class="n">]</span>
  <span class="n">v2</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">year</span><span class="o">==</span><span class="n">y</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">country</span><span class="o">==</span><span class="n">c2</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="n">child_mortality</span><span class="p">)</span>
  <span class="n">v2</span> <span class="o">&lt;-</span> <span class="n">v2[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span><span class="n">]</span>
  <span class="nf">message</span><span class="p">(</span><span class="s">&#34;Child mortality for &#34;</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="s">&#34; and &#34;</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="s">&#34; in &#34;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#34; are &#34;</span><span class="p">,</span> <span class="nf">mean</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span> <span class="s">&#34; and &#34;</span><span class="p">,</span> <span class="nf">mean</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1"># Sri Lanka or Turkey</span>
<span class="nf">reportChildMortality</span><span class="p">(</span><span class="s">&#34;2015&#34;</span><span class="p">,</span> <span class="s">&#34;Sri Lanka&#34;</span><span class="p">,</span> <span class="s">&#34;Turkey&#34;</span><span class="p">)</span>

<span class="c1"># Poland or South Korea</span>
<span class="nf">reportChildMortality</span><span class="p">(</span><span class="s">&#34;2015&#34;</span><span class="p">,</span> <span class="s">&#34;Poland&#34;</span><span class="p">,</span> <span class="s">&#34;South Korea&#34;</span><span class="p">)</span>

<span class="c1"># Malaysia or Russia</span>
<span class="nf">reportChildMortality</span><span class="p">(</span><span class="s">&#34;2015&#34;</span><span class="p">,</span> <span class="s">&#34;Malaysia&#34;</span><span class="p">,</span> <span class="s">&#34;Russia&#34;</span><span class="p">)</span>

<span class="c1"># Pakistan or Vietnam</span>
<span class="nf">reportChildMortality</span><span class="p">(</span><span class="s">&#34;2015&#34;</span><span class="p">,</span> <span class="s">&#34;Pakistan&#34;</span><span class="p">,</span> <span class="s">&#34;Vietnam&#34;</span><span class="p">)</span>

<span class="c1"># Thailand or South Africa</span>
<span class="nf">reportChildMortality</span><span class="p">(</span><span class="s">&#34;2015&#34;</span><span class="p">,</span> <span class="s">&#34;Thailand&#34;</span><span class="p">,</span> <span class="s">&#34;South Africa&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">## Child mortality for Sri Lanka and Turkey in 2015 are 8.7 and 13.5</span>
<span class="c1">## Child mortality for Poland and South Korea in 2015 are 5.2 and 3.5</span>
<span class="c1">## Child mortality for Malaysia and Russia in 2015 are 8.2 and 9.6</span>
<span class="c1">## Child mortality for Pakistan and Vietnam in 2015 are 81.1 and 21.7</span>
<span class="c1">## Child mortality for Thailand and South Africa in 2015 are 12.3 and 42.1</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="long-life-in-a-small-family-and-short-life-in-a-large-family-dichotomy">long-life-in-a-small-family and short-life-in-a-large-family dichotomy</h2>
<p>To examine if in fact there was a long-life-in-a-small-family and short-life-in-a-large-family dichotomy,  we will visualize the average number of children per family (fertility) and the life expectancy for each country.</p>
<h3 id="1-life-expectancy-versus-fertiltiy-in-1962">1. life expectancy versus fertiltiy in 1962</h3>
<p>Use <code>ggplot2</code> to create a plot of life expectancy versus fertiltiy in 1962 for Africa, Asia, Europe, and the Americas. Use color to denote continent and point size to denote population size:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Filter and select data</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">year</span><span class="o">==</span><span class="s">&#34;1962&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">continent</span><span class="p">,</span> <span class="n">life_expectancy</span><span class="p">,</span> <span class="n">fertility</span><span class="p">,</span> <span class="n">population</span><span class="p">)</span>

<span class="c1"># Remove missing values before plotting</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="nf">na.omit</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># Plot with ggplot2</span>
<span class="n">g</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">fertility</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">life_expectancy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">population</span><span class="p">))</span>
<span class="n">g</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">(</span><span class="n">alpha</span> <span class="o">=</span> <span class="m">0.7</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/vZsxRMw.png" alt=""></p>
<p>Do you see a dichotomy? Explain.</p>
<blockquote>
<p>It is obvious that nearly all countries in Europe have low fertrility and high life expectancy, however, countries in Africa tend to have high fertility but low life expectancy.</p>
</blockquote>
<h3 id="2-annotate-the-plot-to-show-different-types-of-countries">2. Annotate the plot to show different types of countries</h3>
<p>Now we will annotate the plot to show different types of countries.</p>
<p>Learn about OECD and OPEC. Add a couple of columns to your consolidated tables containing a logical vector that tells if a country is OECD and OPEC respectively. It is ok to base membership on 2015.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R">
<span class="c1"># Create the member list of OECD based on the official website (2017 Oct.)</span>
<span class="c1"># http://www.oecd.org/about/membersandpartners/</span>
<span class="n">OECD</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Australia&#34;</span><span class="p">,</span> <span class="s">&#34;Austria&#34;</span><span class="p">,</span> <span class="s">&#34;Belgium&#34;</span><span class="p">,</span> <span class="s">&#34;Canada&#34;</span><span class="p">,</span> <span class="s">&#34;Chile&#34;</span><span class="p">,</span> <span class="s">&#34;Czech Republic&#34;</span><span class="p">,</span> <span class="s">&#34;Denmark&#34;</span><span class="p">,</span> <span class="s">&#34;Estonia&#34;</span><span class="p">,</span> <span class="s">&#34;Finland&#34;</span><span class="p">,</span> <span class="s">&#34;France&#34;</span><span class="p">,</span> <span class="s">&#34;Germany&#34;</span><span class="p">,</span> <span class="s">&#34;Greece&#34;</span><span class="p">,</span> <span class="s">&#34;Hungary&#34;</span><span class="p">,</span> <span class="s">&#34;Iceland&#34;</span><span class="p">,</span> <span class="s">&#34;Ireland&#34;</span><span class="p">,</span> <span class="s">&#34;Israel&#34;</span><span class="p">,</span> <span class="s">&#34;Italy&#34;</span><span class="p">,</span> <span class="s">&#34;Japan&#34;</span><span class="p">,</span> <span class="s">&#34;Korea&#34;</span><span class="p">,</span> <span class="s">&#34;Latvia&#34;</span><span class="p">,</span> <span class="s">&#34;Luxembourg&#34;</span><span class="p">,</span> <span class="s">&#34;Mexico&#34;</span><span class="p">,</span> <span class="s">&#34;Netherlands&#34;</span><span class="p">,</span> <span class="s">&#34;New Zealand&#34;</span><span class="p">,</span> <span class="s">&#34;Norway&#34;</span><span class="p">,</span> <span class="s">&#34;Poland&#34;</span><span class="p">,</span> <span class="s">&#34;Portugal&#34;</span><span class="p">,</span> <span class="s">&#34;Slovak Republic&#34;</span><span class="p">,</span> <span class="s">&#34;Slovenia&#34;</span><span class="p">,</span> <span class="s">&#34;Spain&#34;</span><span class="p">,</span> <span class="s">&#34;Sweden&#34;</span><span class="p">,</span> <span class="s">&#34;Switzerland&#34;</span><span class="p">,</span> <span class="s">&#34;Turkey&#34;</span><span class="p">,</span> <span class="s">&#34;United Kingdom&#34;</span><span class="p">,</span> <span class="s">&#34;United States&#34;</span><span class="p">)</span>

<span class="c1"># Create the member list of OPEC based on the official website (2017 Oct.)</span>
<span class="c1"># http://www.opec.org/opec_web/en/about_us/25.htm</span>
<span class="n">OPEC</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Algeria&#34;</span><span class="p">,</span> <span class="s">&#34;Angola&#34;</span><span class="p">,</span> <span class="s">&#34;Ecuador&#34;</span><span class="p">,</span> <span class="s">&#34;Equatorial Guinea&#34;</span><span class="p">,</span> <span class="s">&#34;Gabon&#34;</span><span class="p">,</span> <span class="s">&#34;Iran&#34;</span><span class="p">,</span> <span class="s">&#34;Iraq&#34;</span><span class="p">,</span> <span class="s">&#34;Kuwait&#34;</span><span class="p">,</span> <span class="s">&#34;Libya&#34;</span><span class="p">,</span> <span class="s">&#34;Nigeria&#34;</span><span class="p">,</span> <span class="s">&#34;Qatar&#34;</span><span class="p">,</span> <span class="s">&#34;Saudi Arabia&#34;</span><span class="p">,</span> <span class="s">&#34;United Arab Emirates&#34;</span><span class="p">,</span> <span class="s">&#34;Venezuela&#34;</span><span class="p">)</span>

<span class="c1"># Append logical vectors to the original data frame</span>
<span class="n">df</span><span class="o">$</span><span class="n">OECD</span> <span class="o">&lt;-</span> <span class="nf">with</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">country</span> <span class="o">%in%</span> <span class="n">OECD</span><span class="p">)</span>
<span class="n">df</span><span class="o">$</span><span class="n">OPEC</span> <span class="o">&lt;-</span> <span class="nf">with</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">country</span> <span class="o">%in%</span> <span class="n">OPEC</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-annotate-the-oecd-countries-and-opec-countries">3. Annotate the OECD countries and OPEC countries</h3>
<p>Make the same plot as in Problem 3.1, but this time use color to annotate the OECD countries and OPEC countries. For countries that are not part of these two organization annotate if they are from Africa, Asia, or the Americas.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Create a new column annotating if the conutry is a member of OECD, OPEC, or others.</span>
<span class="n">df</span><span class="o">$</span><span class="n">category</span> <span class="o">&lt;-</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">OECD</span> <span class="o">==</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="s">&#34;OECD&#34;</span><span class="p">,</span>
                      <span class="nf">ifelse</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">OPEC</span> <span class="o">==</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="s">&#34;OPEC&#34;</span><span class="p">,</span>
                             <span class="nf">ifelse</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">continent</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;Africa&#34;</span><span class="p">,</span> <span class="s">&#34;Asia&#34;</span><span class="p">,</span> <span class="s">&#34;Americas&#34;</span><span class="p">),</span> <span class="n">df</span><span class="o">$</span><span class="n">continent</span><span class="p">,</span>
                             <span class="s">&#34;others&#34;</span><span class="p">)))</span>

<span class="c1"># Filter and select data</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">year</span><span class="o">==</span><span class="s">&#34;1962&#34;</span> <span class="o">&amp;</span> <span class="n">category</span><span class="o">!=</span><span class="s">&#34;others&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">life_expectancy</span><span class="p">,</span> <span class="n">fertility</span><span class="p">,</span> <span class="n">population</span><span class="p">)</span>

<span class="c1"># Remove missing values before plotting</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="nf">na.omit</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># Plot with ggplot2</span>
<span class="n">g</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">fertility</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">life_expectancy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">population</span><span class="p">))</span>
<span class="n">g</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="m">0.7</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/ZEXIRmK.png" alt=""></p>
<p>How would you describe the dichotomy?</p>
<blockquote>
<p>All members of OECD have low fertility and ligh life expectancy while members of OPEC tend to have high fertility but low life expectancy, just like countries in Africa.</p>
</blockquote>
<h3 id="4-how-different-kinds-of-family-change-across-time">4. How different kinds of family change across time</h3>
<p>Explore how this figure changes across time. Show us 4 figures that demonstrate how this figure changes through time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Split the years into 4 intervals</span>
<span class="n">df</span><span class="o">$</span><span class="n">year</span> <span class="o">&lt;-</span> <span class="nf">as.numeric</span><span class="p">(</span><span class="nf">as.character</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">year</span><span class="p">))</span>
<span class="n">breakPoints</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1962</span><span class="p">,</span> <span class="m">1982</span><span class="p">,</span> <span class="m">2002</span><span class="p">,</span> <span class="m">2015</span><span class="p">)</span>

<span class="c1"># Filter and select data</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="n">year</span> <span class="o">%in%</span> <span class="n">breakPoints</span> <span class="o">&amp;</span> <span class="n">category</span><span class="o">!=</span><span class="s">&#34;others&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">life_expectancy</span><span class="p">,</span> <span class="n">fertility</span><span class="p">,</span> <span class="n">population</span><span class="p">)</span>

<span class="c1"># Remove missing values before plotting</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="nf">na.omit</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># Plot with ggplot2</span>
<span class="n">g</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">fertility</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">life_expectancy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">population</span><span class="p">))</span>
<span class="n">g</span> <span class="o">+</span> <span class="nf">facet_grid</span><span class="p">(</span><span class="n">year</span> <span class="o">~</span> <span class="n">.)</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="m">0.7</span><span class="p">)</span>
  
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/IHMNauq.png" alt=""></p>
<p>Would you say that the same dichotomy exists today? Explain:</p>
<blockquote>
<p>For members of OECD, the low-fertility-and-high-life-expectancy phenomenon appears to be clearer over time, however, for members of OPEC, <strong>fewer and fewer</strong> contries maintain the low-fertility-and-high-life-expectancy phenomenon as time goes by.</p>
</blockquote>
<h2 id="long-life-in-a-small-family-and-short-life-in-a-large-family-comparison-between-different-countries">long-life-in-a-small-family and short-life-in-a-large-family: Comparison between different countries</h2>
<p>Having time as a third dimension made it somewhat difficult to see specific country trends. Let&rsquo;s now focus on specific countries.</p>
<h3 id="1-compare-france-and-its-former-colony-tunisia">1. Compare France and its former colony Tunisia</h3>
<p>Let&rsquo;s compare France and its former colony Tunisia. Make a plot of fertility versus year with color denoting the country. Do the same for life expecancy. How would you compare Tunisia&rsquo;s improvement compared to France&rsquo;s in the past 60 years? Hint: use <code>geom_line</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Filter and select data</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="m">2016</span> <span class="o">-</span> <span class="n">year</span> <span class="o">&lt;=</span> <span class="m">60</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">country</span> <span class="o">==</span> <span class="s">&#34;France&#34;</span> <span class="o">|</span> <span class="n">country</span> <span class="o">==</span> <span class="s">&#34;Tunisia&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">fertility</span><span class="p">,</span> <span class="n">life_expectancy</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>

<span class="c1"># Remove missing values before plotting</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="nf">na.omit</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># Plot with ggplot2</span>
<span class="n">g1</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">fertility</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">country</span><span class="p">))</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">()</span>
<span class="n">g2</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">life_expectancy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">country</span><span class="p">))</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">()</span>
<span class="nf">grid.arrange</span><span class="p">(</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/Fc5xBFr.png" alt=""></p>
<h3 id="2-compare-vietnam-to-the-oecd-countries">2. Compare Vietnam to the OECD countries</h3>
<p>Do the same, but this time compare Vietnam to the OECD countries.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Filter and select data</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="m">2016</span> <span class="o">-</span> <span class="n">year</span> <span class="o">&lt;=</span> <span class="m">60</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">country</span> <span class="o">==</span> <span class="s">&#34;Vietnam&#34;</span> <span class="o">|</span> <span class="n">category</span> <span class="o">==</span> <span class="s">&#34;OECD&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">fertility</span><span class="p">,</span> <span class="n">life_expectancy</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>

<span class="c1"># Remove missing values before plotting</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="nf">na.omit</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># modify label</span>
<span class="n">new_df</span><span class="o">$</span><span class="n">category</span> <span class="o">&lt;-</span> <span class="nf">with</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">country</span> <span class="o">==</span> <span class="s">&#34;Vietnam&#34;</span><span class="p">,</span> <span class="s">&#34;Vietnam&#34;</span><span class="p">,</span> <span class="n">category</span><span class="p">))</span>

<span class="c1"># Plot with ggplot2</span>
<span class="n">g1</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">fertility</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">category</span><span class="p">))</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">()</span>
<span class="n">g2</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">life_expectancy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">category</span><span class="p">))</span> <span class="o">+</span> <span class="nf">geom_line</span><span class="p">()</span>
<span class="nf">grid.arrange</span><span class="p">(</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/EZanBh6.png" alt=""></p>
<h2 id="examine-gdp-per-capita-per-day">Examine GDP per capita per day</h2>
<p>We are now going to examine GDP per capita per day.</p>
<h3 id="1-distribution-of-gdp-per-capita-per-day-across-countries-in-1970">1. Distribution of GDP per capita per day across countries in 1970</h3>
<p>Create a smooth density estimate of the distribution of GDP per capita per day across countries in 1970. Include OECD, OPEC, Asia, Africa, and the Americas in the computation. When doing this we want to weigh countries with larger populations more. We can do this using the &ldquo;weight&rdquo; argument in <code>geom_density</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Filter, select, and summarize data</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="n">year</span> <span class="o">==</span> <span class="s">&#34;1970&#34;</span><span class="p">,</span> <span class="n">category</span> <span class="o">!=</span> <span class="s">&#34;others&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">select</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">total_gdp</span><span class="p">,</span> <span class="n">population</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>

<span class="c1"># Remove missing values before plotting</span>
<span class="n">new_df</span> <span class="o">&lt;-</span> <span class="nf">na.omit</span><span class="p">(</span><span class="n">new_df</span><span class="p">)</span>

<span class="c1"># Calculate GDP per capita per day</span>
<span class="n">new_df</span><span class="o">$</span><span class="n">gdp_per_capita_per_day</span> <span class="o">&lt;-</span> <span class="nf">with</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span> <span class="n">total_gdp</span><span class="o">/</span><span class="n">population</span><span class="o">/</span><span class="m">365</span><span class="p">)</span>

<span class="c1"># Plot with ggplot2</span>
<span class="n">g</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_df</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">gdp_per_capita_per_day</span><span class="p">))</span>
<span class="n">g</span> <span class="o">+</span> <span class="nf">geom_density</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="n">population</span><span class="o">/</span><span class="nf">sum</span><span class="p">(</span><span class="n">population</span><span class="p">)))</span> <span class="o">+</span> 
  <span class="nf">scale_x_log10</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#34;GDP per capita per day&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/OlWn7kw.png" alt=""></p>
<h3 id="2-distribution-in-each-group">2. Distribution in each group</h3>
<p>Now do the same but show each of the five groups separately.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">g &lt;- ggplot(data=new_df, aes(x=gdp_per_capita_per_day, fill=category))
g + geom_density(aes(weight=population/sum(population)), alpha=0.3) + 
  scale_x_log10() + 
  labs(x=&#34;GDP per capita per day&#34;)
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/eREsdKy.png" alt=""></p>
<h3 id="3-how-the-distribution-has-changed-through-the-years">3. How the distribution has changed through the years</h3>
<p>Visualize these densities for several years. Show a couple of of them. Summarize how the distribution has changed through the years.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># Filter, select, and summarize data
years_selected &lt;- c(1970, 1990, 2010)
new_df &lt;- df %&gt;%
    filter(year %in% years_selected, category != &#34;others&#34;) %&gt;%
    select(year, country, category, total_gdp, population)

# Remove missing values before plotting
new_df &lt;- na.omit(new_df)

# Calculate GDP per capita per day
new_df$gdp_per_capita_per_day &lt;- with(new_df, total_gdp/population/365)
g &lt;- ggplot(data=new_df, aes(x=gdp_per_capita_per_day, fill=category))
g + facet_grid(year ~ .) + 
  geom_density(aes(weight=population/sum(population)), alpha=0.3) + 
  scale_x_log10() + 
  labs(x=&#34;GDP per capita per day&#34;)
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.imgur.com/pnwNNlP.png" alt=""></p>
<h2 id="references">References</h2>
<ul>
<li>Data Science, Statistics, and R (資料科學、統計與 R) Fall 2017, lectured by <a href="http://ghuang.stat.nctu.edu.tw/">Dr. Guan-Hua Huang (黃冠華)</a></li>
</ul>
    
	</div>
  <footer class="article-footer clearfix">
  

<div class="article-tags">
  <span></span>
  
  <a href="https://binnz.github.io/tags/data-mining">Data-Mining</a>
  
  <a href="https://binnz.github.io/tags/statistics">Statistics</a>
  
  <a href="https://binnz.github.io/tags/r">R</a>
  
</div>





<div class="article-categories">
  <span></span>
  
  <a class="article-category-link" href="https://binnz.github.io/categories/programming">Programming</a>
  
</div>



  <div class="article-share" id="share">
    <div data-url="https://binnz.github.io/post/2018-09-10-poverty/" data-title="Practice in R: Insights on Poverty" data-tsina="" class="share clearfix">
    </div>
  </div>
</footer>

	</article>
  


<section class="comment">
<div id="disqus_thread"></div>
</section>
<script>
  <!-- detect whether Disuqs can load -->
  var xhr = new XMLHttpRequest();
  xhr.open('GET', '//disqus.com/next/config.json?' + new Date().getTime(), true);
  xhr.timeout = 3000; 

  xhr.onload = function() { 


var disqus_config = function () {
this.page.url = "https://binnz.github.io/post/2018-09-10-poverty/";
this.page.identifier = "https://binnz.github.io/post/2018-09-10-poverty/";
};
(function() { 
var d = document, s = d.createElement('script');

s.src = '//disc.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
}
  xhr.ontimeout = function() {
  <!-- cannot load Disqus, skip it. -->
  return;
}
xhr.send(null);
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


</div>

    <div class="openaside"><a class="navbutton" href="#" title="Show SideBar"></a></div>
<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide SideBar"></a></div>
<aside class="clearfix">
  

<div class="categorieslist">
  <p class="asidetitle">Categories</p>
  <ul>
    
    <li><a href="https://binnz.github.io/categories/install" title="install">install<sup>2</sup></a></li>
    
    <li><a href="https://binnz.github.io/categories/life" title="life">life<sup>1</sup></a></li>
    
    <li><a href="https://binnz.github.io/categories/notes" title="notes">notes<sup>50</sup></a></li>
    
    <li><a href="https://binnz.github.io/categories/programming" title="programming">programming<sup>25</sup></a></li>
    
    <li><a href="https://binnz.github.io/categories/projects" title="projects">projects<sup>2</sup></a></li>
    
    <li><a href="https://binnz.github.io/categories/publications" title="publications">publications<sup>1</sup></a></li>
    
  </ul>
</div>



  

<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
      
			<li><a href="https://binnz.github.io/tags/ANDROID" title="android">android<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/APACHE-PIG" title="apache-pig">apache-pig<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/ASSOCIATION-ANALYSIS" title="association-analysis">association-analysis<sup>9</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/BEER" title="beer">beer<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/CLASSIFICATION" title="classification">classification<sup>9</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/CLUSTERING" title="clustering">clustering<sup>19</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/CONFERENCE" title="conference">conference<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/DATA-MINING" title="data-mining">data-mining<sup>64</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/DATA-SCIENCE" title="data-science">data-science<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/DATABASE" title="database">database<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/DEEP-LEARNING" title="deep-learning">deep-learning<sup>2</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/ELASTICSEARCH" title="elasticsearch">elasticsearch<sup>2</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/GRAPH" title="graph">graph<sup>12</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/HADOOP" title="hadoop">hadoop<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/INFORMATION-RETRIEVAL" title="information-retrieval">information-retrieval<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/JAVA" title="java">java<sup>5</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/MACHINE-LEARNING" title="machine-learning">machine-learning<sup>5</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/NEURAL-NETWORK" title="neural-network">neural-network<sup>2</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/NLP" title="nlp">nlp<sup>4</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/NLTK" title="nltk">nltk<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/PYTHON" title="python">python<sup>15</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/R" title="r">r<sup>4</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/RELATION-ALGEBRA" title="relation-algebra">relation-algebra<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/SCIKIT-LEARN" title="scikit-learn">scikit-learn<sup>5</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/SPARK" title="spark">spark<sup>9</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/SQL" title="sql">sql<sup>3</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/STATISTICS" title="statistics">statistics<sup>5</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/STREAMING" title="streaming">streaming<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/TIME-SERIES" title="time-series">time-series<sup>2</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/TRAVEL" title="travel">travel<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/UNIT-TEST" title="unit-test">unit-test<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/VBA" title="vba">vba<sup>1</sup></a></li>
      
			<li><a href="https://binnz.github.io/tags/WINDOWS" title="windows">windows<sup>1</sup></a></li>
      
		</ul>
</div>



  
  <div class="archiveslist">
    <p class="asidetitle">Archives</p>
    <ul class="archive-list">
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2021-06">2021年06月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2020-05">2020年05月</a><span class="archive-list-count">12</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2019-09">2019年09月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-09">2018年09月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-08">2018年08月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-06">2018年06月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-05">2018年05月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-04">2018年04月</a><span class="archive-list-count">5</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-03">2018年03月</a><span class="archive-list-count">5</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2018-01">2018年01月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-12">2017年12月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-11">2017年11月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-10">2017年10月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-09">2017年09月</a><span class="archive-list-count">10</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-08">2017年08月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-07">2017年07月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-05">2017年05月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-04">2017年04月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://binnz.github.io/post/#2017-03">2017年03月</a><span class="archive-list-count">20</span>
      </li>
      
    </ul>

  </div>


  

<div class="tagcloudlist">
  <p class="asidetitle">Tags Cloud</p>
  <div class="tagcloudlist clearfix">
    
    <a href="https://binnz.github.io/tags/android" style="font-size: 12px;">android</a>
    
    <a href="https://binnz.github.io/tags/apache-pig" style="font-size: 12px;">apache-pig</a>
    
    <a href="https://binnz.github.io/tags/association-analysis" style="font-size: 12px;">association-analysis</a>
    
    <a href="https://binnz.github.io/tags/beer" style="font-size: 12px;">beer</a>
    
    <a href="https://binnz.github.io/tags/classification" style="font-size: 12px;">classification</a>
    
    <a href="https://binnz.github.io/tags/clustering" style="font-size: 12px;">clustering</a>
    
    <a href="https://binnz.github.io/tags/conference" style="font-size: 12px;">conference</a>
    
    <a href="https://binnz.github.io/tags/data-mining" style="font-size: 12px;">data-mining</a>
    
    <a href="https://binnz.github.io/tags/data-science" style="font-size: 12px;">data-science</a>
    
    <a href="https://binnz.github.io/tags/database" style="font-size: 12px;">database</a>
    
    <a href="https://binnz.github.io/tags/deep-learning" style="font-size: 12px;">deep-learning</a>
    
    <a href="https://binnz.github.io/tags/elasticsearch" style="font-size: 12px;">elasticsearch</a>
    
    <a href="https://binnz.github.io/tags/graph" style="font-size: 12px;">graph</a>
    
    <a href="https://binnz.github.io/tags/hadoop" style="font-size: 12px;">hadoop</a>
    
    <a href="https://binnz.github.io/tags/information-retrieval" style="font-size: 12px;">information-retrieval</a>
    
    <a href="https://binnz.github.io/tags/java" style="font-size: 12px;">java</a>
    
    <a href="https://binnz.github.io/tags/machine-learning" style="font-size: 12px;">machine-learning</a>
    
    <a href="https://binnz.github.io/tags/neural-network" style="font-size: 12px;">neural-network</a>
    
    <a href="https://binnz.github.io/tags/nlp" style="font-size: 12px;">nlp</a>
    
    <a href="https://binnz.github.io/tags/nltk" style="font-size: 12px;">nltk</a>
    
    <a href="https://binnz.github.io/tags/python" style="font-size: 12px;">python</a>
    
    <a href="https://binnz.github.io/tags/r" style="font-size: 12px;">r</a>
    
    <a href="https://binnz.github.io/tags/relation-algebra" style="font-size: 12px;">relation-algebra</a>
    
    <a href="https://binnz.github.io/tags/scikit-learn" style="font-size: 12px;">scikit-learn</a>
    
    <a href="https://binnz.github.io/tags/spark" style="font-size: 12px;">spark</a>
    
    <a href="https://binnz.github.io/tags/sql" style="font-size: 12px;">sql</a>
    
    <a href="https://binnz.github.io/tags/statistics" style="font-size: 12px;">statistics</a>
    
    <a href="https://binnz.github.io/tags/streaming" style="font-size: 12px;">streaming</a>
    
    <a href="https://binnz.github.io/tags/time-series" style="font-size: 12px;">time-series</a>
    
    <a href="https://binnz.github.io/tags/travel" style="font-size: 12px;">travel</a>
    
    <a href="https://binnz.github.io/tags/unit-test" style="font-size: 12px;">unit-test</a>
    
    <a href="https://binnz.github.io/tags/vba" style="font-size: 12px;">vba</a>
    
    <a href="https://binnz.github.io/tags/windows" style="font-size: 12px;">windows</a>
    
  </div>
</div>



  

</aside>
</div>

  </div>
  <footer><div id="footer" >
  <div class="line">
    <span></span>
    
    <div style='background:no-repeat url("https://binnz.github.io/img/US-MT-EPS-02-6001.png") left top;-webkit-background-size:6.875em 6.875em;-moz-background-size:6.875em 6.875em;background-size:6.875em 6.875em;' class="author" ></div>
  </div>
  <section class="info">
    <p>hehe</p>
  </section>
  <div class="social-font clearfix">
    <a href='http://weibo.com/coderzh' target="_blank" title="weibo"></a>
    <a href='https://twitter.com/coderzh' target="_blank" title="twitter"></a>
    <a href='https://github.com/binnz' target="_blank" class="icon-github" title="github"></a>
    <a href='https://www.facebook.com/coderzh' target="_blank" title="facebook"></a>
    <a href='https://www.linkedin.com/coderzh' target="_blank" title="linkedin"></a>
  </div>
  <p class="copyright">Powered by <a href="http://gohugo.io" target="_blank" title="hugo">hugo</a> and Theme by <a href="https://github.com/coderzh/hugo-pacman-theme" target="_blank" title="hugo-pacman-theme">hugo-pacman-theme</a> © 2021
    
    <a href="https://binnz.github.io/" title="California Dreaming">California Dreaming</a>
    
  </p>
</div>
</footer>
  <script src="https://binnz.github.io/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
done = false;
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  $('form.search').on('submit', function (event) {
    if (false === done) {
      event.preventDefault();
      var orgVal = $(this).find('#search').val();
      $(this).find('#search').val('site:https:\/\/binnz.github.io\/ ' + orgVal);
      done = true;
      $(this).submit();
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://b.bshare.cn/barCode?site=weixin&url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});
</script>





</body>
</html>
